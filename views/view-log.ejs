<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <meta name='description' content='BBQ Tracker helps you manage cook sessions, recipes, and outcomes.'>
  <link rel='stylesheet' type='text/css' href='/css/main.css'>
  <link rel='stylesheet' type='text/css' href='/css/datepickr.css'>
  <title><%= title %></title>
</head>
<body>
  <%- include header.ejs -%>
  <main>
    <h1>Saved BBQ Log Entry</h1>
    <section>
      <div id='date'>
        <label for='date'>Date</label>
        <input type='text' name='date' id='date-select' value='<% if (logInfo.date) { %><%= moment(logInfo.date).format('MMMM Do YYYY') %><% } %>'>
      </div>
      <div id='session-box'>
        <label for='session-name'>Session Name</label>
        <input type='text' id='session-name' placeholder='Brisket in May' value='<%= logInfo.session_name %>'>
      </div>
      <div id='bbq-cooker'>
        <label for='cooking-device'>Cooking Device</label>
        <select id='cooking-device' value='<%= logInfo.cooking_device %>'>
          <option value='bge'>Big Green Egg</option>
          <option value='wsm'>Weber Smokey Mountain</option>
          <option value='kettle'>Kettle Grill</option>
          <option value='kettle'>Oven</option>
          <option value='kettle'>Custom</option>
        </select>
      </div>
      <div id='meat'>
        <label for='meat'>Meat</label>
        <select id='meat-type' value='<%= logInfo.meat %>'>
          <option value='brisket'>Beef Brisket</option>
          <option value='beef-ribs'>Beef Ribs</option>
          <option value='beef-tri-tip'>Beef Tri-tip</option>
          <option value='pork-shoulder'>Pork Shoulder</option>
          <option value='pork-ribs'>Pork Ribs (baby backs)</option>
          <option value='pork-ribs'>Pork Ribs (spares)</option>
        </select>
        <label for='meat-weight'>Weight</label>
        <input type='text' name='meat-weight' id='weight' placeholder='5 lbs' value='<%= logInfo.weight %>'>
        <label for='meat-notes'>Notes</label>
        <input type='text' name='meat-notes' id='meat-notes' placeholder='Prime cut of meat' value='<%= logInfo.meat_notes %>'>
      </div>
      <div id='cook-temperature'>
        <label for='cook-temperature'>Cook Temperature</label>
        <input id='temp-slider' type='range' min='100' max='500' step='5' value='<%= logInfo.cook_temperature %>' oninput='window.outputUpdate(value)'>
        <output for='temp-slider' id='temp-slider-output'>225</output>
      </div>
      <div id='estimated-time-box'>
        <label for='estimated-time'>Estimated Time</label>
        <input type='text' name='estimated-time' id='estimated-time' placeholder='10 hours' value='<%= logInfo.estimated_time %>'>
      </div>
      <div id='fuel-box'>
        <label for='fuel'>Fuel</label>
        <select id='fuel' value='<%= logInfo.fuel %>'>
          <option value='lump'>Lump Charcoal</option>
          <option value='Briquettes'>Briquettes</option>
          <option value='Wood'>Wood</option>
        </select>
        <label for='fuel-brand'>Brand</label>
        <input type='text' name='fuel-brand' id='brand' placeholder='Stubbs' value='<%= logInfo.brand %>'>
      </div>
      <div id='wood-box'>
        <label for='wood'>Wood</label>
        <select id='wood' value='<%= logInfo.wood %>'>
          <option value='hickory'>Hickory</option>
          <option value='mesquite'>Mesquite</option>
          <option value='oak'>Oak</option>
          <option value='pecan'>Pecan</option>
          <option value='cherry'>Cherry</option>
          <option value='apple'>Apple</option>
          <option value='none'>None</option>
        </select>
      </div>
    </section>
    <section id='recipe-area'>
      <h2>Recipe Steps</h2>
      <button type='button' id='add-step'>Add Step</button>
      <div id='recipe-list'>
        <ol>
          <% logInfo.steps.forEach(function(item) { %>
            <li>
              <div class='step-box'>
                <div class='step-notes'>
                  <textarea class='step-text' placeholder='Write step here'><%= item.step %></textarea>
                </div>
                <div class='complete-box'>
                  <input type='checkbox' class='complete-check' name='step-complete' 
                    <% if (item.completed === 'true') { %> 
                      checked='checked'
                    <% } %>
                  >
                  <input type='time' class='time' name='time' value='<%= item.time %>'>
                </div>
                <div class='complete-notes'>
                  <textarea class='complete-notes-text' placeholder='Write notes here'><%= item.notes %></textarea>
                  <button type='button' class='remove-step'>Remove Step</button>
                </div>
              </div>
            </li>
          <% }) %>
        </ol>
      </div>
    </section>
      <fieldset class='rating'>
        <input type='radio' id='star5' name='rating' value='5' <% if (logInfo.rating === 5) { %> checked='checked'<% } %>><label class='full' for='star5'></label>
        <input type='radio' id='star4' name='rating' value='4' <% if (logInfo.rating === 4) { %> checked='checked'<% } %>><label class='full' for='star4'></label>
        <input type='radio' id='star3' name='rating' value='3' <% if (logInfo.rating === 3) { %> checked='checked'<% } %>><label class='full' for='star3'></label>
        <input type='radio' id='star2' name='rating' value='2' <% if (logInfo.rating === 2) { %> checked='checked'<% } %>><label class='full' for='star2'></label>
        <input type='radio' id='star1' name='rating' value='1' <% if (logInfo.rating === 1) { %> checked='checked'<% } %>><label class='full' for='star1'></label>
      </fieldset>
      <fieldset id='status-box'>
        <input type='radio' name='status' value='Private' <% if (logInfo.status === 'Private') { %> checked='checked'<% } %>>Private
        <input type='radio' name='status' value='Public' <% if (logInfo.status === 'Public') { %> checked='checked'<% } %>>Public
      </fieldset>
    <button type='button' id='update'>Update Log</button>
  </main>
  <script src='../js/bundle.js'></script>
</body>
</html>

